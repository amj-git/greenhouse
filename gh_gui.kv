#<KvLang>

#:set menusize1 "30sp"
#:set schedtext "40sp"

<ContPanel_gh>:
    do_scroll_x: False
    scroll_type: ['bars']
    container: cont_grid
    bar_width: '55dp'
    bar_pos_y: 'left'
    bar_color: [.7, .7, .7, .9]
    bar_inactive_color: [.7, .7, .7, .9]
    BoxLayout:
        id: cont_grid
        orientation: 'vertical'
        size_hint_y: None        
        padding: [dp(55),0,0,0]     #avoid the scrollbar
        height: self.minimum_height  

<gh_SettingsInterface>:
    orientation: 'horizontal'
    content: cont_panel
    menu: menu
    ContPanel_gh:
        id: cont_panel
        current_uid: menu.selected_uid
    gh_MenuSidebar:
        id: menu
        
<gh_MenuSidebar>:   
    buttons_layout: menu
    close_button: button
    size_hint: (0.3,1)
    GridLayout:
        pos: root.pos
        cols: 1
        id: menu
        orientation: 'vertical'
        padding: 0
        canvas.after:
            Color:
                rgb: .2, .2, .2
            Rectangle:
                pos: self.right - 1, self.y
                size: 1, self.height

    Button:
        text: 'Back'
        id: button
        size_hint: None, None
        width: root.width
        height: max(100, self.texture_size[1] + dp(20))
        pos: root.x , root.y
        font_size: '15sp'
     
<gh_SettingSidebarLabel>:
    size_hint: 1, None
    text_size: self.width - 32, None
    height: self.texture_size[1] + dp(60)
    font_size: '20sp'
    canvas.before:
        Color:
            rgba: 47 / 255., 167 / 255., 212 / 255., int(self.selected)
        Rectangle:
            pos: self.pos
            size: self.size

#See k_circulardatetimepicker.py
<TimeChooserPopup>:
    picker:picker
    content:content
    title: "Choose Time"
    title_size: menusize1
    size_hint: (0.65, 0.95)
    auto_dismiss:False
    BoxLayout:
        id:content
        orientation: "vertical"
        CircularTimePicker:
            id:picker
            #selector_color: (0,0.9,1) 
            size_hint: 1.0, 0.85
        BoxLayout:            
            size_hint: 1.0, 0.15
            orientation: "horizontal"
            Button:
                text: "OK"
                #size_hint_y: None
                font_size: menusize1
                on_release: root.dispatch('on_ok')
            Button:
                text: "Cancel"
                #size_hint_y: None
                font_size: menusize1
                on_release: root.dispatch('on_cancel')

#Auto time schedule editor lines - see gh_schedule_edit.py
<SchedLineEdit_gh>:
    v1:v1
    t1:t1
    t2:t2
    size_hint_y:None  
    height: 75
        
    orientation:'horizontal'
    Button:
        id: v1
        halign: 'center'
        on_release: root.edit_value()
        background_color: (1,0.65,0,1)
        background_down: 'shapes/but1.png'
        background_normal: 'shapes/but2.png'
        font_size: schedtext
    Button:
        id: t1
        halign: 'center'
        #on_release: root.edit_time()
        background_color: (1,0.65,0,1)
        background_down: 'shapes/but1.png'
        background_normal: 'shapes/but2.png'
        font_size: schedtext
    Button:
        id: t2
        halign: 'center'
        #on_release: root.edit_time()
        background_color: (1,0.65,0,1)
        background_down: 'shapes/but1.png'
        background_normal: 'shapes/but2.png'
        font_size: schedtext    
        
#Auto time schedule editor - see gh_schedule_edit.py
<SchedEdit_gh>:
    do_scroll_x: False
    do_scroll_y: True
    scroll_type: ['bars']
    container: cont_grid
    bar_width: '55dp'
    bar_pos_y: 'left'
    bar_color: [.7, .7, .7, .9]
    bar_inactive_color: [.7, .7, .7, .9]
    BoxLayout:
        id: cont_grid
        orientation: 'vertical'
        size_hint: (1,None)      
        height:self.minimum_height
        padding: [dp(55),0,0,0]     #avoid the scrollbar
            
#See k_floatknob.py
<FloatKnobPopup>:
    picker:picker
    content:content
    title: "Choose Value"
    title_size: menusize1
    size_hint: (0.65, 0.95)
    auto_dismiss:False
    BoxLayout:
        id:content
        orientation: "vertical"
        spacing: 20
        Widget:  #spacer widget
            size_hint: (None,None)
            height:10
        Knob: #defined in k_floatknob
            id:picker
            size: (250, 250)
            pos_hint: {'center_x':0.5,'center_y':0.5}
            min: 0
            max: 100
            step: 1
            value: 0  # Default position of knob.
            knobimg_source: "shapes/knob_metal.png"  # Knob texture
            show_label: True  # Show central label
            show_marker: True  # Show surrounding marker
            marker_img: "shapes/bline.png" # Marker texture image
            knobimg_size: 0.7  # Scales knob size to leave space for marker
            markeroff_color: 0, 0, 0, 0
            font_color: [0,0,0,1]
            font_size: schedtext
        BoxLayout:            
            size_hint: 1.0, 0.15
            orientation: "horizontal"
            Button:
                text: "OK"
                #size_hint_y: None
                font_size: menusize1
                on_release: root.dispatch('on_ok')
            Button:
                text: "Cancel"
                #size_hint_y: None
                font_size: menusize1
                on_release: root.dispatch('on_cancel')
            
            
            
<HeaterScreen>:
    menu_root:menu_root
    non_menu_root:non_menu_root
    b1:b1
    b2:b2
    b3:b3
    s1:s1
    b99:b99
    BoxLayout:
        id: root_box
        orientation: 'horizontal'
        BoxLayout:
            id: non_menu_root
            orientation: 'vertical'
            SchedEdit_gh:
                id: s1
            BoxLayout:
                size_hint: (1,0.15)
                orientation: 'horizontal'
                Button:
                    text:'Add'
                    font_size: menusize1
                    on_press: root.add_line()
                Button:
                    text:'Delete'
                    font_size: menusize1
                    on_press: root.delete_line()
                Button:
                    text:'Save'
                    font_size: menusize1
                    on_press: root.save_schedule()
        BoxLayout:
            id: menu_root
            orientation: 'vertical'
            size_hint: (0.3,1)        
            ToggleButton:
                id: b1
                text:'Heater\nOFF'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.heateroffclick()
                background_color: (0,0,0.8,1)
                background_down: 'shapes/but1.png'
                background_normal: 'shapes/but2.png'
            ToggleButton:
                id: b2
                text: 'Heater\nAUTO'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.heaterautoclick()
                background_color: (1,0.65,0,1)
                background_down: 'shapes/but1.png'
                background_normal: 'shapes/but2.png'
            ToggleButton:
                id: b3
                text:'Heater\nBOOST'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.heaterboostclick()
                background_color: (1,0,0,1)
                background_down: 'shapes/but1.png'
                background_normal: 'shapes/but2.png'
            Button:
                id: b99
                text:'Back'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump1()
                
<LightingScreen>:
    menu_root:menu_root
    non_menu_root:non_menu_root
    b1:b1
    b2:b2
    b3:b3
    b99:b99
    BoxLayout:
        id: root_box
        orientation: 'horizontal'
        BoxLayout:
            id: non_menu_root
        BoxLayout:
            id: menu_root
            orientation: 'vertical'
            size_hint: (0.3,1)        
            ToggleButton:
                id: b1
                text:'Light\nOFF'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.heateroffclick()
                background_color: (0,0,0.8,1)
                background_down: 'shapes/but1.png'
                background_normal: 'shapes/but2.png'
            ToggleButton:
                id: b2
                text: 'Light\nAUTO'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.heaterautoclick()
                background_color: (1,0.65,0,1)
                background_down: 'shapes/but1.png'
                background_normal: 'shapes/but2.png'
            ToggleButton:
                id: b3
                text:'Light\nBOOST'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.heaterboostclick()
                background_color: (1,0,0,1)
                background_down: 'shapes/but1.png'
                background_normal: 'shapes/but2.png'
            Button:
                id: b99
                text:'Back'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump1()                
                
<IOStatusScreen>:
    menu_root:menu_root
    non_menu_root:non_menu_root
    b1:b1
    b12:b12
    b13:b13
    b14:b14
    b15:b15
    b2:b2
    
    BoxLayout:
        id: root_box
        orientation: 'horizontal'
        BoxLayout:
            id: non_menu_root
        BoxLayout:
            id: menu_root
            orientation: 'vertical'
            size_hint: (0.3,1)        
            Button:
                id: b1
                text:'Graph...'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump1()
            Button:
                id: b12
                text:'Sprinkler...'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump2()
            Button:
                id: b13
                text:'Heater...'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump3()
            Button:
                id: b14
                text:'Lighting...'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump4()
            Button:
                id: b15
                text:'Settings...'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.page_jump5()
            Button:
                id: b2
                text:'Exit'
                state: 'normal'
                font_size: menusize1
                halign: 'center'
                on_release: root.confirm_quit()            

<gh_sched_line_edit>:
    value_box:value_box
    t1_box:t1_box
    t2_box:t2_box
    
    orientation:'horizontal'
    Label:
        id:value_box
    Label:
        id:t1_box        
    Label:
        id:t2_box        
        
    
<gh_schedule_edit>:
    

     
#</KvLang>
